<template>
  <div>
    <!-- header -->
	<header id="site-header" class="w3l-header fixed-top">
		<!--/nav-->
		<nav class="navbar navbar-expand-lg navbar-light fill px-lg-0 py-0 px-3">
			<div class="container">
				<h1><a class="navbar-brand" href="index.html"><span class="fa fa-play icon-log"
							aria-hidden="true"></span>
						Cinema </a></h1>
				<!-- if logo is image enable this
						<a class="navbar-brand" href="#index.html">
							<img src="image-path" alt="Your logo" title="Your logo" style="height:35px;" />
						</a> -->
				<button class="navbar-toggler collapsed" type="button" data-toggle="collapse"
					data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
					aria-label="Toggle navigation">
					<!-- <span class="navbar-toggler-icon"></span> -->
					<span class="fa icon-expand fa-bars"></span>
					<span class="fa icon-close fa-times"></span>
				</button>

				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav ml-auto">
						<li class="nav-item active">
							<!-- <a class="nav-link" href="index.html">Home</a> -->
							<router-link class="nav-link" to="/">Trang chủ</router-link>
						</li>
						<li class="nav-item">
							<a class="nav-link" >Giới thiệu</a>
						</li>
                        <li class="nav-item">
                            <a class="nav-link" >Liên hệ</a>
                        </li>
						<li v-if="isEmptyObj(this.user)" class="nav-item">
                            <router-link tag="a" class="nav-link" to="/login">Đăng nhập</router-link>
						</li>
                        <li v-else class="nav-item">
                            <a v-on:click="logOut()" class="nav-link">{{ this.user.name }}</a>
                        </li>
					</ul>

					<!--/search-right-->
					<!--/search-right-->
					<div class="search-right">
<!--						<a href="#search" class="btn search-hny mr-lg-3 mt-lg-0 mt-4" title="search">Tìm kiếm <span-->
<!--								class="fa fa-search ml-3" aria-hidden="true"></span></a>-->
						<!-- search popup -->
						<div id="search" class="pop-overlay">
							<div class="popup">
								<form action="#" method="post" class="search-box">
									<input type="search" placeholder="Search your Keyword" name="search"
										required="required" autofocus="">
									<button type="submit" class="btn"><span class="fa fa-search"
											aria-hidden="true"></span></button>
								</form>
								<div class="browse-items">
									<h3 class="hny-title two mt-md-5 mt-4">Browse all:</h3>
									<ul class="search-items">
										<li><a href="genre.html">Action</a></li>
										<li><a href="genre.html">Drama</a></li>
										<li><a href="genre.html">Family</a></li>
										<li><a href="genre.html">Thriller</a></li>
										<li><a href="genre.html">Commedy</a></li>
										<li><a href="genre.html">Romantic</a></li>
										<li><a href="genre.html">Tv-Series</a></li>
										<li><a href="genre.html">Horror</a></li>
										<li><a href="genre.html">Action</a></li>
										<li><a href="genre.html">Drama</a></li>
										<li><a href="genre.html">Family</a></li>
										<li><a href="genre.html">Thriller</a></li>
										<li><a href="genre.html">Commedy</a></li>
										<li><a href="genre.html">Romantic</a></li>
										<li><a href="genre.html">Tv-Series</a></li>
										<li><a href="genre.html">Horror</a></li>
									</ul>
								</div>
							</div>
							<a class="close" href="#close">×</a>
						</div>
						<!-- /search popup -->
						<!--/search-right-->
					</div>


				</div>
			</div>
		</nav>
		<!--//nav-->
	</header>
	<!-- //header -->
	<!-- main-slider -->
  </div>
</template>

<script>
export default {
    data() {
        return {
            user: {}
        }
    },
    created() {
        this.getAuth();
    },
    methods: {
        getAuth() {
            axios.get('auth', {
                headers: {
                    'Authorization': `Bearer ${localStorage.getItem("token")}`
                }
            }).then(res => {
                this.user = res.data;
            });
        },
        logOut() {
            axios.post('logout', {
                token: localStorage.getItem("token")
            }).then(res => {
                this.$router.push({path: '/login'});
                location.reload();
            });
        },
        isEmptyObj(obj) {
            return Object.keys(obj).length === 0;
        }
    }
}
</script>

<style>

</style>
